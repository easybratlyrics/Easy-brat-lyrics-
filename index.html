<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Brat Lyrics Generator</title>

<style>
body{
  margin:0;
  padding:20px;
  background:#ffffff;
  font-family: Arial, sans-serif;
}

h1{
  text-align:center;
  font-family: "Arial Narrow", Arial, sans-serif;
  font-size:14px;
  letter-spacing:1px;
  margin-bottom:15px;
}

textarea{
  width:100%;
  height:80px;
  font-size:16px;
  padding:10px;
  box-sizing:border-box;
}

.controls{
  display:flex;
  gap:10px;
  margin-top:10px;
}

button{
  margin-top:10px;
  padding:10px 15px;
  font-size:15px;
}

canvas{
  width:65%;
  display:block;
  margin:25px auto;
  border:1px solid #ddd;
}
</style>
</head>

<body>

<h1>WRITE ENTIRE SENTENCE AND GET EVERY SINGLE LYRICS</h1>

<textarea id="textInput" placeholder="Type your sentence..."></textarea>

<div class="controls">
  <label>Background <input type="color" id="bgColor" value="#ffffff"></label>
  <label>Text <input type="color" id="textColor" value="#000000"></label>
</div>

<button onclick="generate()">Generate</button>

<div id="output"></div>

<script>
function generate(){
  const text = document.getElementById("textInput").value.trim();
  if(!text) return;

  const bg = document.getElementById("bgColor").value;
  const color = document.getElementById("textColor").value;
  const words = text.split(/\s+/);

  const output = document.getElementById("output");
  output.innerHTML = "";

  let cumulative = [];

  words.forEach((word,index)=>{
    cumulative.push(word);
    const content = cumulative.join(" ");

    const canvas = document.createElement("canvas");
    const ctx = canvas.getContext("2d");

    canvas.width = 1080;
    canvas.height = 1350;

    // background
    ctx.fillStyle = bg;
    ctx.fillRect(0,0,canvas.width,canvas.height);

    // text setup
    const fontSize = 180;
    const lineHeight = fontSize * 1.25;
    const paddingLeft = 100;
    const maxWidth = canvas.width - paddingLeft - 100;

    ctx.fillStyle = color;
    ctx.font = fontSize + "px Arial Narrow, Arial, sans-serif";
    ctx.textBaseline = "top";

    // wrap words
    const allWords = content.split(" ");
    let lines = [];
    let current = [];

    allWords.forEach(w=>{
      const test = current.concat(w).join(" ");
      if(ctx.measureText(test).width > maxWidth){
        lines.push(current);
        current = [w];
      } else {
        current.push(w);
      }
    });
    if(current.length) lines.push(current);

    const totalHeight = lines.length * lineHeight;
    let y = (canvas.height - totalHeight)/2;

    // draw justified lines (LEFT START)
    lines.forEach(line=>{
      let x = paddingLeft;

      if(line.length > 1){
        const wordsWidth = line.reduce((s,w)=>s+ctx.measureText(w).width,0);
        const gap = (maxWidth - wordsWidth)/(line.length-1);

        line.forEach(w=>{
          ctx.fillText(w,x,y);
          x += ctx.measureText(w).width + gap;
        });
      } else {
        ctx.fillText(line[0], x, y);
      }
      y += lineHeight;
    });

    // card
    const wrap = document.createElement("div");
    wrap.appendChild(canvas);

    const btn = document.createElement("button");
    btn.innerText = "Download";
    btn.onclick = ()=>{
      const a = document.createElement("a");
      a.href = canvas.toDataURL("image/png");
      a.download = "brat_" + (index+1) + ".png";
      a.click();
    };

    wrap.appendChild(btn);
    output.appendChild(wrap);
  });
}
</script>

</body>
</html>
